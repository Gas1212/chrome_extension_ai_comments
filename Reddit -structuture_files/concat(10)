SML.di("./BlKmKeMB3d.js",import.meta.url,"BlKmKeMB3d");SML.di("./5r73EsgItq.js",import.meta.url,"5r73EsgItq");SML.di("./BTDAtgkjwq.js",import.meta.url,"BTDAtgkjwq");SML.di("./DvSiWY8C_1.js",import.meta.url,"DvSiWY8C_1");SML.di("./DPbVkh2ynA.js",import.meta.url,"DPbVkh2ynA");SML.di("./DUi1vgEY8G.js",import.meta.url,"DUi1vgEY8G");SML.di("./Clwe-KRACn.js",import.meta.url,"Clwe-KRACn");SML.di("./BKIXDScOgR.js",import.meta.url,"BKIXDScOgR");SML.di("./6Fy_iEkel3.js",import.meta.url,"6Fy_iEkel3");
SML.dm("CD2oxGktzd",["BlKmKeMB3d","5r73EsgItq","BTDAtgkjwq","DvSiWY8C_1","DPbVkh2ynA","DUi1vgEY8G","Clwe-KRACn","BKIXDScOgR","6Fy_iEkel3"],(async(t,e,s,a,o,i,n,r,d)=>{let p=class extends o.M{constructor(){super(...arguments),this.showExpandable=!1,this.shouldRender=!0,this.filtersCount=0,this.reportsCount=0,this.areInlineReportsExpanded=!1,this.handleSlotChange=t=>{const e=t.target.assignedNodes()[0];if(e){const t=e;this.filtersCount=Number(t.getAttribute("filters-count")),this.reportsCount=Number(t.getAttribute("reports-count"))}},this.handleExpandStateChanged=t=>{this.areInlineReportsExpanded=t},this.onToggleReportsChange=t=>{const{action:e}=t;switch(e){case"expand":this.handleExpandStateChanged(!0);break;case"collapse":this.handleExpandStateChanged(!1)}},this.onPostUpdateAction=t=>{if(t.postId!==this.thingId)return;const{action:e,value:s}=t;switch(e){case d.a.approve:case d.a.approveOptimistic:case d.a.remove:case d.a.removeAsSpam:case d.a.confirmRemoval:case d.a.addRemovalReason:case d.a.removeOptimistic:case d.a.removeAsSpamOptimistic:case d.a.confirmRemovalOptimistic:this.shouldRender=!1;break;case d.a.ignoreReports:s&&(this.shouldRender=!1)}},this.onCommentUpdateAction=t=>{if(t.commentId!==this.thingId)return;const{action:e,value:s}=t;switch(e){case r.C.approve:case r.C.approveOptimistic:case r.C.remove:case r.C.removeAsSpam:case r.C.confirmRemoval:case r.C.addRemovalReason:case r.C.removeOptimistic:case r.C.removeAsSpamOptimistic:case r.C.confirmRemovalOptimistic:this.shouldRender=!1;break;case r.C.ignoreReports:s&&(this.shouldRender=!1)}},this.onAwardOnContentUpdateAction=({action:t,awardOnContentId:e})=>{if(e===this.thingId)switch(t){case n.A.approve:case n.A.remove:case n.A.confirmRemoval:this.shouldRender=!1}}}connectedCallback(){switch(this.pubsub.subscribe(t.T.ModReportsToggle,this.onToggleReportsChange),i.i(this.thingId)){case t.M.Award:this.pubsub.subscribe(t.T.AwardOnContentUpdated,this.onAwardOnContentUpdateAction);break;case t.M.Comment:this.pubsub.subscribe(t.T.CommentUpdated,this.onCommentUpdateAction);break;case t.M.Post:this.pubsub.subscribe(t.T.PostUpdated,this.onPostUpdateAction)}super.connectedCallback()}render(){if(this.shouldRender)return this.showExpandable&&0===this.filtersCount&&this.reportsCount>1?e.x` <div class="inline-flex flex-row w-fit gap-2 bg-mods-reported-background rounded-[8px] items-start overflow-hidden"> ${this.wrapWithPreviousActions(this.areInlineReportsExpanded?e.x`<slot name="mod-content-state-indicators" class="pb-xs"></slot>`:e.x`<slot name="mod-content-state-indicators-only-first" class="pb-xs"></slot>`)} <div style="margin:4px 8px 0 0"> ${t.o({appearance:"secondary",children:this.areInlineReportsExpanded?"":"+"+(this.reportsCount-1),leadingIcon:this.areInlineReportsExpanded?a.c({size:e.I.ExtraSmall}):"",trailingIcon:this.areInlineReportsExpanded?"":s.c({size:e.I.ExtraSmall}),attributes:{className:"bg-tone-7 h-[16px] text-10 font-semibold rounded-[8px] z-2 relative",onclick:()=>{this.handleExpandStateChanged(!this.areInlineReportsExpanded)},style:"--button-padding: 4px",id:"toggle-button"},size:t.q.ExtraSmall})} </div> </div> `:this.wrapWithPreviousActions(e.x` <slot name="mod-content-state-indicators" class="pb-xs" @slotchange="${this.handleSlotChange}"></slot> `)}};p.styles=[t.t],t._([t.n({type:Boolean,attribute:"show-expandable"})],p.prototype,"showExpandable",void 0),t._([t.h()],p.prototype,"shouldRender",void 0),t._([t.h()],p.prototype,"filtersCount",void 0),t._([t.h()],p.prototype,"reportsCount",void 0),t._([t.h()],p.prototype,"areInlineReportsExpanded",void 0),p=t._([t.e("mod-content-state-indicators")],p)}));
SML.di("./DPbVkh2ynA.js",import.meta.url,"DPbVkh2ynA");SML.di("./CD2oxGktzd.js",import.meta.url,"CD2oxGktzd");SML.di("./BlKmKeMB3d.js",import.meta.url,"BlKmKeMB3d");SML.di("./Cd4co5k-SP.js",import.meta.url,"Cd4co5k-SP");SML.di("./uTt0uOeGou.js",import.meta.url,"uTt0uOeGou");SML.di("./5r73EsgItq.js",import.meta.url,"5r73EsgItq");SML.di("./BOUHMQyoqV.js",import.meta.url,"BOUHMQyoqV");SML.di("./R-bLm5IGsB.js",import.meta.url,"R-bLm5IGsB");SML.di("./DaDL4fzqhc.js",import.meta.url,"DaDL4fzqhc");SML.di("./DUi1vgEY8G.js",import.meta.url,"DUi1vgEY8G");SML.di("./Clwe-KRACn.js",import.meta.url,"Clwe-KRACn");SML.di("./BKIXDScOgR.js",import.meta.url,"BKIXDScOgR");SML.di("./6Fy_iEkel3.js",import.meta.url,"6Fy_iEkel3");SML.di("./B6ue8dF8lI.js",import.meta.url,"B6ue8dF8lI");SML.di("./fMyUCYmjkT.js",import.meta.url,"fMyUCYmjkT");SML.di("./BvRwsD9-lk.js",import.meta.url,"BvRwsD9-lk");SML.di("./BiG3_8H-Om.js",import.meta.url,"BiG3_8H-Om");SML.di("./DqQGNkgr3o.js",import.meta.url,"DqQGNkgr3o");SML.di("./Cz1orcRbBl.js",import.meta.url,"Cz1orcRbBl");SML.di("./uGpbjpFo0a.js",import.meta.url,"uGpbjpFo0a");SML.di("./CZMYFY9NrH.js",import.meta.url,"CZMYFY9NrH");SML.di("./BTDAtgkjwq.js",import.meta.url,"BTDAtgkjwq");SML.di("./DvSiWY8C_1.js",import.meta.url,"DvSiWY8C_1");
SML.dm("CUuHd2rKpI",["BlKmKeMB3d","Cd4co5k-SP","uTt0uOeGou","5r73EsgItq","DPbVkh2ynA","CD2oxGktzd","BOUHMQyoqV","R-bLm5IGsB","DaDL4fzqhc","DUi1vgEY8G","Clwe-KRACn","BKIXDScOgR","6Fy_iEkel3","B6ue8dF8lI","fMyUCYmjkT","BvRwsD9-lk","BiG3_8H-Om","DqQGNkgr3o","Cz1orcRbBl","uGpbjpFo0a","CZMYFY9NrH","BTDAtgkjwq","DvSiWY8C_1"],(async(t,e,i,n)=>{const E=new Set([t.gn.ApproveComment,t.gn.ApproveLink,t.gn.RemoveComment,t.gn.RemoveLink,t.gn.SpamComment,t.gn.SpamLink,t.gn.AddRemovalReason,t.gn.UpdateRemovalReason]);let a=class extends n.s{constructor(){super(),this.updateAnimation="",this.thingId="",this.userId="",this.updateState=void 0,this._isVisible=!1,this._pubsub=new t.u(this),this.handleIncomingRealtimeUpdate=t=>{const{moderatorID:e,targetID:i,action:n}=t;i===this.thingId&&e!==this.userId&&E.has(n)&&(this.updateState=t,this.triggerRealtimeUpdateAnimation())},this.onItemEnterIntoView=()=>{this._isVisible=!0,this.triggerRealtimeUpdateAnimation()},this.onItemLeaveView=()=>{this._isVisible=!1},this.triggerRealtimeUpdateAnimation=()=>{if(!this._isVisible||!this.updateState)return;this.updateAnimation=t.ae()?"dark":"light";const n=i.d(this.updateState.action);e.p(this.thingId,n,!0),this.updateState=void 0},new t.ay(this,this,{threshold:[.5]})}connectedCallback(){this._pubsub.subscribe(t.T.ModRealtimeUpdate,this.handleIncomingRealtimeUpdate),this.addEventListener("faceplate-enter",this.onItemEnterIntoView),this.addEventListener("faceplate-leave",this.onItemLeaveView),super.connectedCallback()}disconnectedCallback(){this.removeEventListener("faceplate-enter",this.onItemEnterIntoView),this.removeEventListener("faceplate-leave",this.onItemLeaveView),super.disconnectedCallback()}render(){return n.x`<slot></slot>`}};a.styles=[n.a`:host{width:100%}`,t.a0("mod-realtime-action-listener[updateAnimation~='light'] > * {\n  animation: realtimeFade 3s;\n  animation-timing-function: ease-out;\n}\nmod-realtime-action-listener[updateAnimation~='dark'] > * {\n  animation: realtimeFadeNight 3s;\n  animation-timing-function: ease-out;\n}\n@keyframes realtimeFade {\n  from {\n    background-color: #fff2bd;\n    border: 1px solid #dbaf00;\n  }\n  to {\n    background-color: #f0f5f9;\n    border: 1px solid transparent;\n  }\n}\n@keyframes realtimeFadeNight {\n  from {\n    background-color: #665505;\n    border: 1px solid #382d03;\n  }\n  to {\n    background-color: #030303;\n    border: 1px solid #343536;\n  }\n}\n"),t.t],t._([t.n({type:String,reflect:!0})],a.prototype,"updateAnimation",void 0),t._([t.n({type:String,attribute:"thing-id"})],a.prototype,"thingId",void 0),t._([t.n({type:String,attribute:"user-id"})],a.prototype,"userId",void 0),a=t._([t.e("mod-realtime-action-listener")],a)}));
SML.di("./BlKmKeMB3d.js",import.meta.url,"BlKmKeMB3d");SML.di("./BOUHMQyoqV.js",import.meta.url,"BOUHMQyoqV");SML.di("./R-bLm5IGsB.js",import.meta.url,"R-bLm5IGsB");SML.di("./DaDL4fzqhc.js",import.meta.url,"DaDL4fzqhc");SML.di("./DUi1vgEY8G.js",import.meta.url,"DUi1vgEY8G");SML.di("./Clwe-KRACn.js",import.meta.url,"Clwe-KRACn");SML.di("./BKIXDScOgR.js",import.meta.url,"BKIXDScOgR");SML.di("./uTt0uOeGou.js",import.meta.url,"uTt0uOeGou");SML.di("./6Fy_iEkel3.js",import.meta.url,"6Fy_iEkel3");SML.di("./5r73EsgItq.js",import.meta.url,"5r73EsgItq");SML.di("./B6ue8dF8lI.js",import.meta.url,"B6ue8dF8lI");SML.di("./fMyUCYmjkT.js",import.meta.url,"fMyUCYmjkT");SML.di("./BvRwsD9-lk.js",import.meta.url,"BvRwsD9-lk");SML.di("./DqQGNkgr3o.js",import.meta.url,"DqQGNkgr3o");SML.di("./CZMYFY9NrH.js",import.meta.url,"CZMYFY9NrH");
SML.dm("DPbVkh2ynA",["BlKmKeMB3d","BOUHMQyoqV","R-bLm5IGsB","DaDL4fzqhc","DUi1vgEY8G","Clwe-KRACn","BKIXDScOgR","uTt0uOeGou","6Fy_iEkel3","5r73EsgItq","B6ue8dF8lI","fMyUCYmjkT","BvRwsD9-lk","DqQGNkgr3o","CZMYFY9NrH"],(async(e,t,a,i,r,o,n,s,d,l)=>{const c=new (class {constructor(){this.gqlSubscriptionControllers=[],this.onNewDataReceived=t=>{e.p(e.T.ModRealtimeUpdate,t)},this.onNewDataReceivedThrottled=i.D(this.onNewDataReceived,1e3,!0)}subscribeToRealtimeUpdates(t){if(t.subredditId){const r=new e.c_(t);t.addController(r),r.subscribe((a=t.subredditId,i=this.onNewDataReceivedThrottled,{query:{operationName:"SubscribeSubscription",query:"\n    subscription SubscribeSubscription($input: SubscribeInput!) {\n      subscribe(input: $input) {\n        id\n        ... on BasicMessage {\n          data {\n            ... on ModActionMessageData {\n              id\n              createdAt\n              subredditID\n              moderatorID\n              targetID\n              targetType\n              action\n            }\n          }\n        }\n      }\n    }\n    ",variables:{input:{channel:{teamOwner:"MOD",subredditID:a,category:"MOD_UPDATE"}}}},onData:e=>{const t=e?.data?.subscribe?.data;t&&i(t)}})),this.gqlSubscriptionControllers.push(r)}var a,i}hostDisconnected(){this.unsubscribeFromRealtimeUpdates()}unsubscribeFromRealtimeUpdates(){this.gqlSubscriptionControllers.forEach((e=>e.unsubscribe())),this.gqlSubscriptionControllers=[]}}),p=e=>e.stopPropagation(),h=l.x` <div class="pl-sm"> <faceplate-shimmer class="h-[40px] w-100 pt-md" shape="pill"></faceplate-shimmer> <faceplate-shimmer class="h-[40px] w-100 pt-md" shape="pill"></faceplate-shimmer> <faceplate-shimmer class="h-[40px] w-100 pt-md" shape="pill"></faceplate-shimmer> <faceplate-shimmer class="h-[40px] w-100 pt-md" shape="pill"></faceplate-shimmer> </div> `;class m extends l.s{constructor(){super(),this.previousActionsFeature=!1,this.thingId="",this.scrollContainerSelector="",this.showPreviousActions=!1,this.pubsub=new e.u(this),this.repositionClickCard=()=>{this.clickCard?.reposition()},this.togglePreviousActions=()=>{const e=this.shadowRoot?.querySelector("div[slot='content']");e?.hasAttribute("hidden")?this.clickCard?.show():this.clickCard?.close()},this.wrapWithPreviousActions=i=>{if(!this.previousActionsFeature)return i;const o=r.i(this.thingId);return l.x` <click-card label="previous-actions-popup" scroll-container-selector="${e.ad(this.scrollContainerSelector)}" custom-global-close-event="close-all-previous-actions-popups" @click-card:opened="${()=>{this.showPreviousActions=!0}}" @click-card:closed="${()=>{this.showPreviousActions=!1}}" tooltip-style="z-index: 20;"> <div class="w-fit m-0 border-0 bg-transparent cursor-pointer relative">${i}</div> <div slot="content" class="w-[350px] pb-sm pr-sm"> <div class="flex items-center justify-between pl-sm min-h-[40px]"> <p class="text-14 font-semibold m-0"> ${"Previous Actions"} </p> ${o!==e.M.Award?l.x`<faceplate-dropdown-menu @click="${p}"> ${e.o({appearance:"plain",leadingIcon:a.o()})} <faceplate-menu slot="menu" hidden> <ul class="p-0 max-w-[300px]" role="menu"> ${t.l({label:"Ignore reports and approve",description:l.x`<span class="font-normal">${"Remove this item from the mod queue, and ignore future reports"} </span>`,attributes:{onclick:()=>{this.dropdownMenu?.close(),this.dispatchEvent(e.c(s.M.IgnoreReports))}}})} </ul> </faceplate-menu> </faceplate-dropdown-menu>`:l.A} </div> <hr class="bg-neutral-border border-0 h-[1px] mb-0 ml-sm"> <div class="w-100 max-h-[300px] overflow-y-auto mr-sm" style="scrollbar-color:var(--color-neutral-border) transparent;scrollbar-width:thin"></div> ${this.showPreviousActions?l.x` <div class="w-100 max-h-[300px] overflow-y-auto mr-sm" style="scrollbar-color:var(--color-neutral-border) transparent;scrollbar-width:thin"> ${o===e.M.Award?l.x`<p class="pl-sm"> ${"Looks like this award doesn't have any previous actions to display..."} </p>`:l.x` <faceplate-partial src="/svc/shreddit/previous-actions/${this.thingId}" loading="eager"> ${h} </faceplate-partial> `} </div> `:l.A} </div> </click-card> `;},this.setAttribute("id","previous-actions-popup")}connectedCallback(){this.addEventListener("faceplate-load",this.repositionClickCard),this.addEventListener("faceplate-load-start",this.repositionClickCard),super.connectedCallback()}disconnectedCallback(){this.removeEventListener("faceplate-load",this.repositionClickCard),this.removeEventListener("faceplate-load-start",this.repositionClickCard),super.disconnectedCallback()}updated(){this.repositionClickCard()}}m.styles=[e.t],e._([e.n({type:Boolean,attribute:"previous-actions-feature"})],m.prototype,"previousActionsFeature",void 0),e._([e.n({type:String,attribute:"thing-id"})],m.prototype,"thingId",void 0),e._([e.n({type:String,attribute:"scroll-container-selector"})],m.prototype,"scrollContainerSelector",void 0),e._([e.h()],m.prototype,"showPreviousActions",void 0),e._([e.a2("click-card")],m.prototype,"clickCard",void 0),e._([e.a2("faceplate-dropdown-menu")],m.prototype,"dropdownMenu",void 0);let u=class extends m{constructor(){super(...arguments),this.shouldRenderVerdict=!1,this.shouldRenderInlineActions=!1,this.shouldRenderShareToModChat=!1,this.shouldRenderOverflowMenu=!1,this.showVerdict=!1,this.verdictLoading=!1,this.hasSubscribedToRealtimeUpdates=!1,this.markVerdictAsLoaded=e=>{e.detail.resource.startsWith("/svc/shreddit/mod-partials/")&&(this.verdictLoading=!1)},this.handlePostUpdated=({postId:e,action:t,value:a})=>{if(this.thingId===e)switch(t){case d.a.addRemovalReason:case d.a.approve:case d.a.confirmRemoval:case d.a.remove:case d.a.removeAsSpam:this.loadVerdict();break;case d.a.ignoreReports:a&&this.loadVerdict()}},this.handleCommentUpdated=({commentId:e,action:t,value:a})=>{if(this.thingId===e)switch(t){case n.C.addRemovalReason:case n.C.approve:case n.C.confirmRemoval:case n.C.remove:case n.C.removeAsSpam:this.loadVerdict();break;case n.C.ignoreReports:a&&this.loadVerdict()}},this.handleAwardOnContentUpdate=({action:t,awardOnContentId:a})=>{if(this.thingId===a)switch(t){case o.A.approve:this.loadVerdict(e.af.ModApproved);break;case o.A.remove:case o.A.confirmRemoval:this.loadVerdict(e.af.ModRemoved)}},this.loadVerdict=async e=>{this.showVerdict=!0,this.verdictLoading=!0,this.verdictOverride=e},this.onModInlineActionsLoaded=e=>{if(!e||!e.target)return;const t=e.target,a=t?.assignedNodes();a?.length>0&&!this.hasSubscribedToRealtimeUpdates&&(c.subscribeToRealtimeUpdates(this),this.hasSubscribedToRealtimeUpdates=!0)}}connectedCallback(){this.addEventListener("faceplate-load",this.markVerdictAsLoaded),super.connectedCallback()}firstUpdated(){switch(r.i(this.thingId)){case e.M.Award:this.pubsub.subscribe(e.T.AwardOnContentUpdated,this.handleAwardOnContentUpdate);break;case e.M.Comment:this.pubsub.subscribe(e.T.CommentUpdated,this.handleCommentUpdated);break;case e.M.Post:this.pubsub.subscribe(e.T.PostUpdated,this.handlePostUpdated)}}disconnectedCallback(){this.removeEventListener("faceplate-load",this.markVerdictAsLoaded),super.disconnectedCallback()}render(){const e=this.shouldRenderInlineActions?l.x` <slot name="mod-inline-actions" @slotchange="${this.onModInlineActionsLoaded}"></slot> `:l.A,t=this.verdictLoading?l.x` <faceplate-partial src="${`/svc/shreddit/mod-partials/${r.i(this.thingId)?.toLowerCase()}/${this.thingId}${this.verdictOverride?`?verdict=${this.verdictOverride}`:""}`}" loading="eager" target="${`#feed-element-mod-verdict-${this.thingId.replace("|","\\|")}`}"> <slot name="mod-verdict"></slot> </faceplate-partial> `:this.showVerdict||this.moderationVerdict?l.x`<slot name="mod-verdict"></slot>`:"";return l.x` ${this.shouldRenderVerdict?l.x` <div class="flex gap-x-2xs items-center max-h-xl"> ${t?this.wrapWithPreviousActions(t):e} </div> `:e} ${this.shouldRenderShareToModChat?l.x`<slot name="mod-share-to-mod-chat"></slot>`:l.A} ${this.shouldRenderOverflowMenu?l.x`<slot name="mod-overflow-menu"></slot>`:l.A} `}};return u.styles=[e.t],e._([e.n({type:Boolean,attribute:"render-verdict"})],u.prototype,"shouldRenderVerdict",void 0),e._([e.n({type:Boolean,attribute:"render-inline-actions"})],u.prototype,"shouldRenderInlineActions",void 0),e._([e.n({type:Boolean,attribute:"render-share-to-mod-chat"})],u.prototype,"shouldRenderShareToModChat",void 0),e._([e.n({type:Boolean,attribute:"render-overflow-menu"})],u.prototype,"shouldRenderOverflowMenu",void 0),e._([e.n({type:String,attribute:"moderation-verdict"})],u.prototype,"moderationVerdict",void 0),e._([e.h()],u.prototype,"showVerdict",void 0),e._([e.h()],u.prototype,"verdictLoading",void 0),e._([e.h()],u.prototype,"verdictOverride",void 0),u=e._([e.e("mod-content-actions")],u),{M:m}}));