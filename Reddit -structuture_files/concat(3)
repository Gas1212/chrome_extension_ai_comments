SML.di("./BlKmKeMB3d.js",import.meta.url,"BlKmKeMB3d");SML.di("./BOUHMQyoqV.js",import.meta.url,"BOUHMQyoqV");SML.di("./5r73EsgItq.js",import.meta.url,"5r73EsgItq");SML.di("./VdlKVydWgZ.js",import.meta.url,"VdlKVydWgZ");SML.di("./R-bLm5IGsB.js",import.meta.url,"R-bLm5IGsB");SML.di("./BvRwsD9-lk.js",import.meta.url,"BvRwsD9-lk");SML.di("./B6ue8dF8lI.js",import.meta.url,"B6ue8dF8lI");SML.di("./DaDL4fzqhc.js",import.meta.url,"DaDL4fzqhc");SML.di("./BiG3_8H-Om.js",import.meta.url,"BiG3_8H-Om");
SML.dm("BwUJHSArFj",["BlKmKeMB3d","BOUHMQyoqV","5r73EsgItq","VdlKVydWgZ","R-bLm5IGsB","BvRwsD9-lk","B6ue8dF8lI","DaDL4fzqhc","BiG3_8H-Om"],(async(e,t,r,i,n)=>{let a=class extends r.s{constructor(){super(...arguments),this.noteId="",this.userId="",this.subredditId="",this.renderDropdownMenu=()=>r.x`<faceplate-dropdown-menu> ${this.renderOverflowMenuButton()} <faceplate-menu slot="menu" class="whitespace-nowrap max-h-[18rem] overflow-y-auto"><slot></slot> ${t.l({attributes:{role:"menuitem"},label:"Delete",leadingIcon:i.d(),onClick:this.onDeleteNote})} </faceplate-menu> </faceplate-dropdown-menu>`,this.closeMenu=()=>{this.dropdownMenu?.close()},this.onDeleteNote=async()=>{const{data:t}=await e.Y({operation:e.O.DeleteModUserNote,variables:{input:{noteId:this.noteId,noteType:e.b1.Note,userId:this.userId,subredditId:this.subredditId}}});t.deleteModUserNote?.ok&&(this.removeNoteFromTheDom(),e.p(e.T.ModNotesDeleted))},this.removeNoteFromTheDom=()=>{const e=document.getElementById(this.noteId);e&&e.parentNode?.removeChild(e)}}renderOverflowMenuButton(){return r.x`${e.o({appearance:"plain",attributes:{"aria-label":"Open user actions"},leadingIcon:n.o({size:r.I.Small}),size:e.q.Small})}`;}render(){return this.renderDropdownMenu()}};return a.styles=[e.t],e._([e.n({type:String,attribute:"note-id"})],a.prototype,"noteId",void 0),e._([e.n({type:String,attribute:"user-id"})],a.prototype,"userId",void 0),e._([e.n({type:String,attribute:"subreddit-id"})],a.prototype,"subredditId",void 0),e._([e.a2("faceplate-dropdown-menu")],a.prototype,"dropdownMenu",void 0),a=e._([e.e("mod-note-overflow-menu")],a),{get ModNoteOverflowMenu(){return a}}}));
SML.di("./BlKmKeMB3d.js",import.meta.url,"BlKmKeMB3d");SML.di("./DaDL4fzqhc.js",import.meta.url,"DaDL4fzqhc");SML.di("./5r73EsgItq.js",import.meta.url,"5r73EsgItq");
SML.dm("C5WPWN6EmD",["BlKmKeMB3d","DaDL4fzqhc","5r73EsgItq"],(async(e,t,i)=>{const n="hovercard",s="profile",r="community",a="other-user",o=i.x`,&nbsp;`,u={SUBREDDIT_NAME_ATTRIBUTE:"subreddit-name",SUBREDDIT_NAME_CLASS:".subreddit-name",SUBREDDIT_ID_ATTRIBUTE:"subreddit-id"};let h=class extends i.s{constructor(){super(...arguments),this.username="",this.source=s,this.achievements=[],this.unlockCount=0,this.totalTrophies=0,this.shouldRenderEntrypoint=!0,this.loading=!1,this.subredditId="",this.subredditName="",this.isModalFeatureActivated=!1,this.pubsub=new e.u(this),this._activateFeature=async t=>e.r(t)}getAchievements(e){const t=[],i=[],n=e.filter((e=>e&&e.trophies.edges.length));for(const e of n)for(const n of e.trophies.edges){const e=n?.node;e&&(e.unlockedAt?t.push(e):i.push(e))}return t.concat(i)}setTrophyCounts(e){this.unlockCount=0,this.totalTrophies=0;for(const t of e)this.unlockCount+=t.unlockedAt?1:0,this.totalTrophies++}extractAttributeData(e){const t=document.querySelectorAll(`[${e}]`);return 0===t.length?null:t[0].getAttribute(e)}extractClassData(e){const t=document.querySelectorAll(e);if(0===t.length)return null;const i=t[0];return i?i.innerText:null}addSubredditPrefix(e){return e?/^r\//.test(e)?e:`r/${e}`:null;}async getCommunityAchievementsData(){try{const t=await e.Y({operation:e.O.UserCommunityAchievements,variables:{username:this.username,subredditId:this.subredditId,imageMaxWidth:100}}),i=t.data?.redditorInfoByName;if("Redditor"!==i?.__typename||!i.trophyCase)return void(this.shouldRenderEntrypoint=!1);const n=[],s=i.trophyCase.trophiesBySubredditId||[];for(const e of s)"AchievementImageTrophy"!==e.__typename&&"AchievementRepeatableImageTrophy"!==e.__typename||n.push(e);this.achievements=n,this.unlockCount=i.trophyCase.trophiesBySubredditId?.length||0,this.totalTrophies=i.trophyCase.trophiesBySubredditId?.length||0}catch(e){window.Sentry?.captureError?.(e)}}async getAllAchievementsData(){try{if(!this.username)return void(this.achievements=[]);const t=await e.Y({operation:e.O.TrophyCategories,variables:{trophyImageMaxWidth:100,name:this.username,includeRepeatableAchievements:!0}}),i=t.data?.redditorInfoByName;if("Redditor"!==i?.__typename)return;const n=i.trophyCase?.categories?.edges.map((e=>e?.node));if(!n)return;const s=[];for(const e of n)e&&"AchievementTrophyCategory"===e.__typename&&s.push(e);if(!s.length)return;this.achievements=this.getAchievements(s),this.setTrophyCounts(this.achievements)}catch(e){window.Sentry?.captureError?.(e)}}async connectedCallback(){super.connectedCallback(),this.subredditId=this.extractAttributeData(u.SUBREDDIT_ID_ATTRIBUTE)||"",this.subredditName=this.addSubredditPrefix(this.extractAttributeData(u.SUBREDDIT_NAME_ATTRIBUTE)||this.extractClassData(u.SUBREDDIT_NAME_CLASS))||"";const e=this.source===n||this.source===r,t=this.subredditId&&this.subredditName;!e||t?(this.loading=!0,this.subredditId&&e?await this.getCommunityAchievementsData():await this.getAllAchievementsData(),this.loading=!1):this.shouldRenderEntrypoint=!1}joinTemplates(e,t=i.x`, `,n=!1){let s=i.x``;for(let r=0;r<e.length;r++){const a=r===e.length-1&&!n?i.A:t;s=i.x`${s}${e[r](a)}`}return s}async handleAchievementClick(i,n,s=!1){const r=!!document.querySelector("achievement-modal");this.isModalFeatureActivated||r||(await this._activateFeature({name:e.e7}),this.isModalFeatureActivated=!0),this.pubsub.publish(e.T.AchievementsModalShowById,{achievementId:i,username:n,isCurrentLoggedUser:s});const a=this.getPageTypeFromSource();e.i(this,t.bj(a))}renderAchievementTitles(e){return i.x`
      ${this.joinTemplates(this.getImageTrophies(e.achievements).slice(0,e.numOfAchievements).map((e=>t=>i.x`<div
                data-testid="achievement-entrypoint-title"
                class="text-12 font-normal text-neutral-content no-underline cursor-pointer"
                @click="${()=>{this.handleAchievementClick(e.id,this.username,this.source===s)}}"
                @keydown="${t=>{" "!==t.key&&"Enter"!==t.key||this.handleAchievementClick(e.id,this.username,this.source===s)}}"
              >
                <span class="achievement-flair-title">${e.name}${t}</span>
              </div>`)),i.x`${e.separator}`,e.numOfUnlockedAchievements>3)}
    `}renderMoreLink(e){return i.x`
      <div
        class="text-12 font-normal text-neutral-content no-underline cursor-pointer"
        @click="${()=>this.handleViewLinkClick(`/user/${e.username}/achievements/`,!0)}"
        @keydown="${t=>{" "!==t.key&&"Enter"!==t.key||this.handleViewLinkClick(`/user/${e.username}/achievements/`,!0)}}"
        data-testid="more-achievements"
      >
        <span class="achievement-flair-title"
          >${`+${e.numOfUnlockedAchievements-e.numOfAchievements} more`}</span
        >
      </div>
    `;}renderTitlesSection(e){if(!e.numOfUnlockedAchievements)return i.x`<div
        class="flex flex-row flex-wrap items-center text-12 font-normal text-neutral-content"
      >
        ${"None unlocked"}
      </div>`;const t=this.renderAchievementTitles(e);let n;return n=e.numOfUnlockedAchievements>3?i.x`${t}${this.renderMoreLink(e)}`:i.x`${t}`,i.x`<div class="flex flex-row flex-wrap items-center" style="line-height: 1rem;">
      ${n}
    </div>`}getImageTrophies(e){const t=[];for(const i of e)"AchievementImageTrophy"!==i.__typename&&"AchievementRepeatableImageTrophy"!==i.__typename||t.push(i);return t}renderImagesSection(e){const t=this.getImageTrophies(e.achievements).slice(0,3).map(((e,t)=>this.renderImage({name:e.name,imageUrl:e.gridImage.url,id:e.id,username:this.username,index:t,isUnlocked:!0}))),n=t.length,r=this.source===s;if(n<3&&r){const e=3-n;for(let i=0;i<e;i++)t.push(this.renderImage({name:"",imageUrl:"https://preview.redd.it/l3ct2kzdo12d1.png?width=500&height=500&crop=smart&auto=webp&s=201ce96e4984d919ccb4e0483cbf6d3140b3a5c0",id:"",username:this.username,index:i+n,isUnlocked:!1}))}return i.x`<div
      class="flex flex-row ${t.length<2?"me-sm":""} z-0"
      style="max-width: 100px;"
    >
      ${t}
    </div>`}renderImage(e){const t="rtl"===getComputedStyle(this).direction;let n="";e.index>0&&(n=`transform: translateX(${t?"":"-"}${40*e.index}%);`);const r=-2*e.index;return i.x`
      <div
        @click="${t=>{e.isUnlocked?this.handleAchievementClick(e.id,this.username,this.source===s):t.preventDefault()}}"
        @keydown="${t=>{" "!==t.key&&"Enter"!==t.key||this.handleAchievementClick(e.id,this.username,this.source===s)}}"
        class="${e.isUnlocked?"cursor-pointer":""}"
        data-testid="achievement-entrypoint-image-container"
        style="${n}; z-index: ${r};"
      >
        <div
          style="position: relative; width: ${40}px;
          height: ${40}px; z-index: ${r};"
          class="achievement-flair"
        >
          <img
            class="absolute top-0 bottom-0 start-0 end-0"
            alt="${e.name}"
            style="z-index: ${r};"
            src="${e.imageUrl}"
            width="${40}"
            height="${40}"
          />

          <div class="absolute top-0 bottom-0 start-0 end-0" style="z-index: ${r-1};">
            <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
              <circle cx="20" cy="20" r="20" fill="var(--color-neutral-background)" />
            </svg>
          </div>
        </div>
      </div>
    `}getPageTypeFromSource(){return this.isInHovercard()?e.au.UserHovercard:this.isInProfile()||this.isInOtherUserProfile()?e.au.Profile:this.isInCommunity()?e.au.Community:e.au.Unknown}getWindow(){return window}publishViewAllAchievementsTracking(){const i=this.getPageTypeFromSource();e.i(this,t.bk(i))}handleViewLinkClick(e="/achievements",t=!1){this.publishViewAllAchievementsTracking(),t?this.getWindow().open(e,"_blank"):this.getWindow().location.href=e}handleViewLinkKeyDown(e,t){" "!==e.key&&"Enter"!==e.key||(this.publishViewAllAchievementsTracking(),t.location.href="/achievements")}getViewAllHref(){return this.isInCommunity()?`/user/${this.username}/achievements/category/community/`:`/user/${this.username}/achievements`}renderActionBar(){return this.isInProfile()||this.isInCommunity()?i.x`
        <div
          class="flex flex-row 
            justify-between w-full mt-xs ${this.isInProfile()?"mb-sm":""} items-center"
        >
          <div class="flex flex-col text-12 font-normal text-neutral-content-weak items-center">
            ${this.isInCommunity()&&!this.unlockCount?i.A:`${this.unlockCount} unlocked`}
          </div>
          ${e.o({appearance:"secondary",attributes:{className:"pointer-events-auto hover:underline",onclick:()=>this.handleViewLinkClick(this.getViewAllHref(),!0),"data-testid":"achievements-view-link","aria-label":"View All Achievements"},children:"View All",size:e.q.Small})}
        </div>
      `:i.x`
      <div
        tabindex="0"
        data-testid="achievements-view-link"
        class="flex flex-row 
          justify-between w-full mt-xs mb-md items-center"
        @click="${()=>this.handleViewLinkClick()}"
        @keydown="${e=>this.handleViewLinkKeyDown(e,window)}"
      >
        <span class="text-12 a no-visited hover:underline cursor-pointer">
          ${"View your achievements"}
        </span>
      </div>
    `;}isInHovercard(){return this.source===n}isInCommunity(){return this.source===r}isInProfile(){return this.source===s}isInOtherUserProfile(){return this.source===a}getTitle(){let e="";return e=this.isInCommunity()?"community achievements":this.isInHovercard()?`${this.subredditName} achievements`:"achievements",i.x`
      <div
        class="achievements-entrypoint-title
            flex flex-row w-full items-start mb-xs ${this.isInHovercard()?"":"uppercase"}
            text-12 font-semibold ${this.isInHovercard()?"text-neutral-content":"text-neutral-content-weak"}"
      >
        ${e}
      </div>
    `;}renderEntrypoint(){if(!this.shouldRenderEntrypoint||this.loading)return i.A;if(!this.unlockCount)return i.A;const e={achievements:this.achievements,username:this.username,numOfAchievements:this.unlockCount<3?this.unlockCount:3,numOfUnlockedAchievements:this.unlockCount,separator:o};return i.x`
      <hr class="border-0 border-b-sm border-solid border-neutral-border-weak w-full" />
      ${this.getTitle()}
      <faceplate-tracker
        source="achievements"
        action="view"
        noun="right_rail"
        class="achievements-entrypoint flex flex-col w-full items-center"
      >
        <div class="achievement-profile-flairs flex flex-row w-full">
          ${this.renderImagesSection(e)}
          ${this.username?this.renderTitlesSection(e):i.A}
        </div>
        ${this.renderActionBar()}
      </faceplate-tracker>
      ${this.isInHovercard()?i.x`<hr class="border-0 border-b-sm border-solid border-neutral-border-weak w-full" />`:i.A}
    `}render(){return this.isInCommunity()?i.x`<div class="flex flex-col w-full px-md box-border">
        ${this.renderEntrypoint()}
      </div>`:this.renderEntrypoint()}};return h.styles=[i.a`
      .achievement-flair:hover {
        transform: translateY(-10%);
        transition: all 0.5s ease;
      }
      .achievement-flair-title:hover {
        text-decoration: underline;
      }
      .achievement-profile-entrypoint {
        pointer-events: auto !important;
      }
    `,e.t],e._([e.n({type:String,attribute:"username"})],h.prototype,"username",void 0),e._([e.n({type:String,attribute:"source"})],h.prototype,"source",void 0),e._([e.h()],h.prototype,"achievements",void 0),e._([e.h()],h.prototype,"unlockCount",void 0),e._([e.h()],h.prototype,"totalTrophies",void 0),e._([e.h()],h.prototype,"shouldRenderEntrypoint",void 0),e._([e.h()],h.prototype,"loading",void 0),e._([e.h()],h.prototype,"subredditId",void 0),e._([e.h()],h.prototype,"subredditName",void 0),e._([e.h()],h.prototype,"isModalFeatureActivated",void 0),h=e._([e.e("achievements-entrypoint")],h),{get AchievementsEntrypoint(){return h},CSS_SELECTORS:u}}));
SML.di("./BlKmKeMB3d.js",import.meta.url,"BlKmKeMB3d");SML.di("./5r73EsgItq.js",import.meta.url,"5r73EsgItq");
SML.dm("CLd-mi863C",["BlKmKeMB3d","5r73EsgItq"],(async(s,e)=>{let i=s.Y,t=class extends e.s{constructor(){super(...arguments),this.subredditId="",this.isDismissed=!1,this.debouncedUpdateDismissedState=s.ao((async()=>{if(this.subredditId)try{const e={subredditId:this.subredditId,isDismissed:this.isDismissed};await i({operation:s.O.UpdateAchievementCategorySuggestion,variables:e})}catch{}}),500)}async handleClick(){this.isDismissed=!this.isDismissed;const e=this.closest(".mod-guidance-unit"),i=e?.querySelector("#mod-guidance-unit-content");i&&i.classList.toggle("hidden",this.isDismissed);const t=e?.querySelector(".collapsed-progress");t&&t.classList.toggle("hidden",!this.isDismissed);const d=e?.querySelector(".collapsed-text"),o=e?.querySelector(".expanded-text");d&&d.classList.toggle("hidden",!this.isDismissed),o&&o.classList.toggle("hidden",this.isDismissed);const r=this.querySelector("#mod-guidance-header-up"),n=this.querySelector("#mod-guidance-header-down");r&&n&&(r.classList.toggle("hidden",this.isDismissed),n.classList.toggle("hidden",!this.isDismissed)),this.isDismissed&&s.i(this,s.b({source:"mod_guidance",action:"collapse",noun:"module"},{subreddit:{id:this.subredditId}})),this.debouncedUpdateDismissedState()}render(){return e.x`<slot @keypress="${this.handleClick}" @click="${this.handleClick}"></slot>`}};return s._([s.n({type:String,attribute:"subreddit-id"})],t.prototype,"subredditId",void 0),s._([s.n({type:Boolean,attribute:"dismissed",reflect:!0})],t.prototype,"isDismissed",void 0),t=s._([s.e("mod-guidance-unit-header")],t),{get ModGuidanceUnitHeader(){return t}}}));
SML.di("./BlKmKeMB3d.js",import.meta.url,"BlKmKeMB3d");SML.di("./5r73EsgItq.js",import.meta.url,"5r73EsgItq");SML.di("./63Jqzdcaz-.js",import.meta.url,"63Jqzdcaz-");SML.di("./R-bLm5IGsB.js",import.meta.url,"R-bLm5IGsB");SML.di("./DI7cGJvVZb.js",import.meta.url,"DI7cGJvVZb");SML.di("./CDzhiNvrlu.js",import.meta.url,"CDzhiNvrlu");SML.di("./BOUHMQyoqV.js",import.meta.url,"BOUHMQyoqV");SML.di("./lPa85AVt0n.js",import.meta.url,"lPa85AVt0n");SML.di("./BKIXDScOgR.js",import.meta.url,"BKIXDScOgR");SML.di("./BByfBb3DtG.js",import.meta.url,"BByfBb3DtG");SML.di("./BrjpRnU-PI.js",import.meta.url,"BrjpRnU-PI");SML.di("./2BUF-XPmG0.js",import.meta.url,"2BUF-XPmG0");SML.di("./B6ue8dF8lI.js",import.meta.url,"B6ue8dF8lI");SML.di("./BOFArMgvcl.js",import.meta.url,"BOFArMgvcl");SML.di("./CdMLm8Qzkx.js",import.meta.url,"CdMLm8Qzkx");SML.di("./8oPvgmj-om.js",import.meta.url,"8oPvgmj-om");SML.di("./DUi1vgEY8G.js",import.meta.url,"DUi1vgEY8G");SML.di("./BfE64a5vmO.js",import.meta.url,"BfE64a5vmO");SML.di("./6Fy_iEkel3.js",import.meta.url,"6Fy_iEkel3");SML.di("./DvsPjJYyVl.js",import.meta.url,"DvsPjJYyVl");SML.di("./Ep5-l_fSWX.js",import.meta.url,"Ep5-l_fSWX");SML.di("./VdlKVydWgZ.js",import.meta.url,"VdlKVydWgZ");SML.di("./DaDL4fzqhc.js",import.meta.url,"DaDL4fzqhc");SML.di("./AZHQyTff9e.js",import.meta.url,"AZHQyTff9e");SML.di("./_UrLOFENdf.js",import.meta.url,"_UrLOFENdf");SML.di("./Dj7wutmAw0.js",import.meta.url,"Dj7wutmAw0");SML.di("./BJv8PD5p_F.js",import.meta.url,"BJv8PD5p_F");SML.di("./BtTypo-YYI.js",import.meta.url,"BtTypo-YYI");SML.di("./WZ4Wz7rMl9.js",import.meta.url,"WZ4Wz7rMl9");SML.di("./nqC4RPtzoF.js",import.meta.url,"nqC4RPtzoF");SML.di("./BPHbvkjHNE.js",import.meta.url,"BPHbvkjHNE");SML.di("./aJuC96ienp.js",import.meta.url,"aJuC96ienp");SML.di("./uOlAvv4IVq.js",import.meta.url,"uOlAvv4IVq");SML.di("./Dn-7CvSfYz.js",import.meta.url,"Dn-7CvSfYz");SML.di("./txJ4CWWFdt.js",import.meta.url,"txJ4CWWFdt");SML.di("./bEyalNEKb3.js",import.meta.url,"bEyalNEKb3");SML.di("./BuGr3KYo1_.js",import.meta.url,"BuGr3KYo1_");SML.di("./JHz8Q9zKSG.js",import.meta.url,"JHz8Q9zKSG");SML.di("./BnR1oGtv5z.js",import.meta.url,"BnR1oGtv5z");SML.di("./uTt0uOeGou.js",import.meta.url,"uTt0uOeGou");SML.di("./BtqmVQuPYp.js",import.meta.url,"BtqmVQuPYp");SML.di("./CIKcizrGFk.js",import.meta.url,"CIKcizrGFk");SML.di("./Bah6ju7WDV.js",import.meta.url,"Bah6ju7WDV");SML.di("./Upik_ypwmc.js",import.meta.url,"Upik_ypwmc");SML.di("./HTDknLUUE2.js",import.meta.url,"HTDknLUUE2");SML.di("./CS7IpfiW3M.js",import.meta.url,"CS7IpfiW3M");SML.di("./3YDw4G2jiA.js",import.meta.url,"3YDw4G2jiA");SML.di("./Hw1PFKH8z9.js",import.meta.url,"Hw1PFKH8z9");SML.di("./BvRwsD9-lk.js",import.meta.url,"BvRwsD9-lk");SML.di("./BiG3_8H-Om.js",import.meta.url,"BiG3_8H-Om");SML.di("./C4V-zbFk_r.js",import.meta.url,"C4V-zbFk_r");SML.di("./B080iS2IcD.js",import.meta.url,"B080iS2IcD");SML.di("./CbYASah0Ux.js",import.meta.url,"CbYASah0Ux");SML.di("./JaGlTj3I-9.js",import.meta.url,"JaGlTj3I-9");SML.di("./B_rZxm3skf.js",import.meta.url,"B_rZxm3skf");
SML.dm("CLs3kcdI01",["BlKmKeMB3d","5r73EsgItq","63Jqzdcaz-","R-bLm5IGsB","DI7cGJvVZb","CDzhiNvrlu","BOUHMQyoqV","lPa85AVt0n","BKIXDScOgR","8oPvgmj-om","DUi1vgEY8G","BfE64a5vmO","6Fy_iEkel3","DvsPjJYyVl","Ep5-l_fSWX","VdlKVydWgZ","DaDL4fzqhc","AZHQyTff9e","_UrLOFENdf","Dj7wutmAw0","BJv8PD5p_F","BtTypo-YYI","WZ4Wz7rMl9","nqC4RPtzoF","BPHbvkjHNE","aJuC96ienp","uOlAvv4IVq","Dn-7CvSfYz","txJ4CWWFdt","bEyalNEKb3","JHz8Q9zKSG","BnR1oGtv5z","BByfBb3DtG","BrjpRnU-PI","2BUF-XPmG0","B6ue8dF8lI","BOFArMgvcl","CdMLm8Qzkx","BuGr3KYo1_","uTt0uOeGou","BtqmVQuPYp","CIKcizrGFk","Bah6ju7WDV","Upik_ypwmc","HTDknLUUE2","CS7IpfiW3M","3YDw4G2jiA","Hw1PFKH8z9","BvRwsD9-lk","BiG3_8H-Om","C4V-zbFk_r","B080iS2IcD","CbYASah0Ux","JaGlTj3I-9","B_rZxm3skf"],(async(e,a,t,i,n,r,o,s,m,l,d,u,c,k,p,h,g,N,I,v,b,T,R,E,S,f,O,D,z,P,L,A)=>{const y=(e,t)=>{const i=function(e,a){const{toggleProps:t}=e;return t&&a[t.stateKey]?o.l({...e,liRole:"menuitem",label:t.toggledLabel,leadingIcon:t.toggledIcon}):o.l({...e,liRole:"menuitem"})}(e,t),n=function(e,a){const{toggleProps:t}=e;return t&&a[t.stateKey]?e.san||t.toggledSan?{...e.san,...t.toggledSan}:void 0:e.san}(e,t);return n?(r=i,s=n.source,m=n.action,l=n.noun,a.x` <faceplate-tracker source="${s}" action="${m}" noun="${l}"> ${r} </faceplate-tracker> `):i;var r,s,m,l},C=a=>({label:"Award",leadingIcon:l.a(),disabled:a.disabled,attributes:{className:"award-comment-menu-button s:hidden"},isUserEligible:()=>a.canRenderAwardButton&&a.isAwardable,onClick:()=>{const t=u.a.setCorrelationId();e.i(a,d.e({awardId:a.awardId,thingId:a.commentId,subredditId:a.subredditId,correlationId:t})),a.awardController.activateDialog()},sortIndex:c.C.Award});function j(e,a){const t=a?"Something went wrong trying to mark as brand affiliate":"Something went wrong trying to unmark as brand affiliate";return e?.[0]?.message??t}const M=a=>({label:"Mark as brand affiliate",leadingIcon:p.b({}),disabled:a.disabled,attributes:{className:"brand-affiliate-menu-button"},toggleProps:{stateKey:"isCommentCommercialCommunication",toggledLabel:"Unmark as brand affiliate",toggledIcon:k.b({})},isUserEligible:()=>a.isUserLoggedIn&&a.isCommentAuthor&&!a.isDeleted,onClick:()=>{a.onToggleMenuItemClick({updateFunction:(t,i)=>(async function(a, t, i) {const n=!i,r={input:{thingId:t,commercialCommunicationState:n}},{data:o,errors:s}=await e.Y({operation:e.O.UpdateCommercialCommunicationState,variables:r});if(s?.length)throw new Error(j(s,n));if(!o?.updateCommercialCommunicationState?.ok)throw new Error(j(o?.updateCommercialCommunicationState?.errors,n));return e.i(a,e.b({source:a.telemetrySource,action:"click",noun:n?"mark_brand_affiliate":"unmark_brand_affiliate"},{post:{id:a.postId},comment:{id:a.commentId}})),a.dispatchEvent(new CustomEvent("reload-shreddit-comment",{bubbles:!0,composed:!0})),n})(a,t,i),stateKey:"isCommentCommercialCommunication",successText:"Marked as brand affiliate",errorText:"Unable to mark as brand affiliate",toggleSuccessText:"Unmarked as brand affiliate",toggleErrorText:"Unable to unmark as brand affiliate"})},sortIndex:c.C.BrandAffiliate}),_=a=>({label:"Delete comment",leadingIcon:h.d({}),disabled:a.disabled,san:{source:"comment_overflow_menu",action:"click",noun:"delete"},attributes:{className:"delete-comment-menu-button"},isUserEligible:()=>a.isCommentAuthor,onClick:async()=>{if(a.commentId){await a._activateFeature({name:e.l5});const t=document.getElementById(g.dd);await customElements.whenDefined("shreddit-comment-deletion-modal"),await(t?.updateComplete),t?.openModalForComment(a.commentId)}},sortIndex:c.C.Delete});let H=e.Y;async function U(a,t,i){const n=i?e.dm.None:e.dm.AdminDistinguished,r={input:{commentId:t,distinguishType:n,distinguishState:n===e.dm.None?e.ds.None:e.ds.Distinguished}},{data:o,errors:s}=await H({operation:e.O.UpdateCommentDistinguishedState,variables:r});if(!o?.updateCommentDistinguishState?.ok)throw new Error(`Response was not "ok", ${s[0]?.message}`);const l=!i,d=l?"distinguish_as_admin":"undistinguish_as_admin";return e.i(a,function(a,t){return e.b({source:"moderator",action:"click",noun:a},{comment:{id:t},action_info:{reason:"comment"}})}(d,t)),e.p(e.T.CommentUpdated,{commentId:t,action:m.C.distinguishAsAdmin,value:l}),l}const K=e=>({label:"Show admin label",leadingIcon:N.a({}),disabled:e.disabled,toggleProps:{stateKey:"isCommentDistinguishedAsAdmin",toggledLabel:"Hide admin label",toggledIcon:N.b({})},attributes:{className:"distinguish-as-admin-menu-button"},isUserEligible:()=>e.isAdmin&&function(e){return e.isCommentAuthor&&!e.isDeleted}(e),onClick:()=>{e.onToggleMenuItemClick({updateFunction:(a,t)=>U(e,a,t),stateKey:"isCommentDistinguishedAsAdmin",successText:"Comment is marked as distinguished as admin.",errorText:"There was an error distinguishing the comment as admin. Please try again.",toggleSuccessText:"Comment is marked as undistinguished as admin.",toggleErrorText:"There was an error undistinguishing the comment as admin. Please try again."})},sortIndex:c.C.AdminDistinguish}),w=a=>({label:"Edit comment",leadingIcon:I.e({}),disabled:a.disabled,href:!a.canOpenComposer&&a.permalink?a.permalink:void 0,san:{source:a.permalink?"comment":"comment_overflow_menu",action:"click",noun:"edit"},isUserEligible:()=>a.isCommentAuthor&&a.isEditableComment,onClick:t=>{if(!a.canOpenComposer&&a.permalink)return;const i=(n=a.commentErrorOnEditReason)===v.U.CommentHasCollectibleExpression?"Sorry, currently you cannot edit Collectible Expression comments on Web.":n===v.U.CommentHasVideo?"Sorry, currently you cannot edit comments with videos on Web.":n===v.U.CommentHasProcessingVideo?"Sorry, you cannot edit this comment while the video is still processing.":void 0;var n;if(i){const a=e.c("faceplate-alert",{level:e.a5.notice,message:i});return void t.target?.dispatchEvent(a)}const r=a.closest(`shreddit-comment[thingid="${a.commentId}"]`),o=r?.querySelector(`#comment-${a.commentId}-edit-partial`);if(!o)return;const s=o.querySelector("faceplate-shimmer");s?.classList.remove("hidden");const m=r?.querySelector("shreddit-comment-action-row");m?.classList.add("hidden"),r?.setAttribute("edit-mode","");const l=g.dc({adjacentElement:o});(async()=>{try{const e=new Promise(((e,a)=>{o.addEventListener("faceplate-error",a,{once:!0}),o.addEventListener("faceplate-alert",a,{once:!0})}));await Promise.race([e,o.load()]);const a=r?.querySelector("comment-composer-host");await(a?.focusAsync())}catch{s?.classList.add("hidden"),m?.classList.remove("hidden"),r?.removeAttribute("edit-mode")}finally{l()}})()},sortIndex:c.C.Edit});let B=e.Y;const F=a=>({label:"Follow comment",leadingIcon:T.n({}),disabled:a.disabled,toggleProps:{stateKey:"isCommentFollowed",toggledLabel:"Unfollow comment",toggledIcon:b.n({})},attributes:{className:"follow-comment-menu-button"},isUserEligible:()=>a.isUserLoggedIn&&!a.isCommentAuthor&&a.shouldRenderFollowMenuItem,onClick:()=>{a.onToggleMenuItemClick({updateFunction:(t,i)=>(async function(a, t, i) {const n=await B({operation:e.O.UpdateCommentFollowState,variables:{input:{commentId:t,followState:i?e.l6.Unfollowed:e.l6.Followed}}});if(!n.data.updateCommentFollowState?.ok)throw new Error(`Response was not "ok", ${n.errors[0]?.message}`);const r=!i;return e.i(a,(r?g.de:g.df)(a.telemetrySource)),r})(a,t,i),stateKey:"isCommentFollowed",successText:"Comment followed!",errorText:"Failed to follow comment.",toggleSuccessText:"Comment unfollowed!",toggleErrorText:"Failed to unfollow comment."})},sortIndex:c.C.Follow}),G=(a,t)=>{const i="boolean"==typeof t?.value?t.value:!a.menuState.isTranslationActive;if(a.menuState={...a.menuState,isTranslationActive:i},t?.dispatchTelemetry){let t=null;a.postId&&(t=document.querySelector(`shreddit-post#${a.postId}`));const i=document.querySelector(`shreddit-comment[thingid=${a.commentId}]`);e.i(a,S.ae({id:i?.thingId,parent_id:i?.parentId,post_id:i?.postId,score:parseInt(i?.score??"",10)||void 0,type:"comment",created_timestamp:e.cY(i?.created??""),content_type:i?.contentType,translation_language:t?.translationLanguage,translation_state:i?.isCommentTranslated},t||void 0))}if(t?.dispatchEvent){const t={id:a.commentId,isTranslationActive:i,source:"PDP_COMMENT_OVERFLOW_MENU"};e.p(e.T.I18nCommentTranslationOverride,t)}},x=t=>({label:"Language and translations",leadingIcon:f.s({size:a.I.Medium}),attributes:{className:"language-and-translations-menu-button"},onClick:()=>(a=>{const t={postId:a.postId,commentId:a.commentId,isTranslationActive:a.menuState.isTranslationActive,isOpen:!0,pageType:O.T.Pdp,source:"PDP_COMMENT_OVERFLOW_MENU"};e.p(e.T.I18nLanguageAndTranslationsModalToggle,t)})(t),isUserEligible:()=>!!t.i18nLanguageAndTranslationsEligible,sortIndex:c.C.LanguageAndTranslations}),V="s:hidden m:hidden l:hidden xl:hidden",Y="text-secondary hover:text-secondary-hover\n    active:bg-interactive-pressed hover:bg-neutral-background-hover\n    hover:no-underline cursor-pointer",W=`${V} py-xs px-md ${Y}`,J=t=>({label:"Reply",leadingIcon:D.c({attributes:{"aria-hidden":"true"},size:a.I.Medium}),san:{source:"post_detail",action:"click",noun:"reply_comment"},attributes:{className:`${g.dg} ${V} ${Y}`},isUserEligible:()=>t.canRenderReplyButton,onClick:()=>{t.dispatchEvent(e.c(g.ba,{detail:t.commentId}))},sortIndex:c.C.Reply});let Z=e.Y;const $=a=>({label:"Turn on reply notifications",leadingIcon:T.n({}),toggleProps:{stateKey:"isReplyNotificationOn",toggledLabel:"Turn off reply notifications",toggledIcon:b.n({})},san:{source:"comment",action:"click",noun:"overflow_send_replies_disable"},attributes:{className:"reply-notifications-menu-button"},isUserEligible:()=>a.isCommentAuthor,onClick:()=>{a.onToggleMenuItemClick({updateFunction:(a,t)=>(async function(a, t, i) {const n=await Z({operation:e.O.UpdateCommentSendRepliesState,variables:{input:{commentId:t,sendRepliesState:i?e.l7.DoNotSend:e.l7.Send}}});if(!n.data.updateCommentSendRepliesState?.ok)throw new Error(`Response was not "ok", ${n.errors[0]?.message}`);return!i})(0,a,t),stateKey:"isReplyNotificationOn",successText:"Notifications on! You’ll get updates when there is new activity.",errorText:"Unable to turn notifications on.",toggleSuccessText:"Notifications off. You won’t get updates on this comment anymore.",toggleErrorText:"Unable to turn notifications off."})},sortIndex:c.C.Notifs});const X=a=>({label:"Report",leadingIcon:z.r(),disabled:a.disabled,san:{source:"comment",action:"click",noun:"report"},isUserEligible:()=>!a.isCommentAuthor,onClick:t=>{a.isUserLoggedIn&&function(a,t){e.p(e.T.ReportFlowInit,{thingId:t.commentId,authorName:t.authorName,authorId:t.authorId,triggerElement:a.target,permalink:t.permalink})}(t,a)},sortIndex:c.C.Report});let q=e.Y;const Q=a=>({id:"save",label:"Save",leadingIcon:P.s({}),disabled:a.disabled,toggleProps:{stateKey:"isCommentSaved",toggledLabel:"Remove from saved",toggledIcon:k.s({})},attributes:{className:"save-comment-menu-button"},isUserEligible:()=>a.isUserLoggedIn,onClick:()=>{a.onToggleMenuItemClick({updateFunction:(t,i)=>(async function(a, t, i) {const n=await q({operation:e.O.UpdateCommentSaveState,variables:{input:{commentId:t,saveState:i?e.l8.None:e.l8.Saved}}});if(!n.data.updateCommentSaveState?.ok)throw new Error(`Update comment save state response was not "ok", ${n.errors[0]?.message}`);const r=!i;return e.i(a,(r?g.dh:g.di)(a.telemetrySource)),r})(a,t,i),stateKey:"isCommentSaved",successText:"Comment saved successfully",errorText:"Unable to save comment",toggleSuccessText:"Removed from saved",toggleErrorText:"Unable to remove from saved"})},sortIndex:c.C.Save}),ee="s:hidden m:hidden l:hidden xl:hidden",ae=e=>({label:"Insights",leadingIcon:L.p({size:a.I.Medium}),attributes:{className:`comment-insights-menu-button ${ee}`},isUserEligible:()=>e.canRenderInsightsButton,sortIndex:c.C.Insights,href:`/commentstats/${e.commentId}`}),te=a=>({id:"share-comment-as-post",label:"Share as post",leadingIcon:A.c({}),disabled:a.disabled,attributes:{className:"share-comment-as-post-button"},isUserEligible:()=>a.isUserLoggedIn,onClick:()=>{var t;e.i(a,(t=a.commentId,e.b({source:"comment",action:"click",noun:"share_as_post"},{action_info:{reason:"share_sheet"},comment:{id:t}})));const i=`${e.dA.CrosspostSourceId}=${a.commentId}`;window.open(`/submit?${i}`,"_blank")},sortIndex:c.C.ShareAsPost});let ie=class extends a.s{constructor(){super(...arguments),this.source="",this.action="",this.noun="",this.postId="",this.commentId="",this.shouldUseBottomSheet=!1,this.shouldUseSmallButton=!1,this.shouldRenderFollowMenuItem=!1,this.canRenderShareButton=!1,this.canRenderShareCommentAsPostButton=!1,this.canRenderReplyButton=!1,this.canRenderAwardButton=!1,this.canRenderInsightsButton=!1,this.canOpenComposer=!1,this.classOverride="",this.disabled=!1,this.isSaved=!1,this.isFollowed=!1,this.isDeleted=!1,this.isCommentAuthor=!1,this.isUserLoggedIn=!1,this.isAdmin=!1,this.authorId="",this.isEditableComment=!1,this.isAwardable=!1,this.isSendReplies=!1,this.isCommercialCommunication=!1,this.telemetrySource="no-telemetry-source-defined",this.menuLabel="",this.isCustomPost=!1,this.translationContextValue=e.aQ,this.isCommentPretranslated=!1,this.i18nFeedbackEligible=!1,this.isImmersiveVisit=!1,this.isMtSeoVisit=!1,this.commentStatsKillSwitch=!1,this.menuProps=[],this.menuState={isCommentSaved:!1,isCommentFollowed:!1,isCommentDistinguishedAsAdmin:!1,isCommentCommercialCommunication:!1,isReplyNotificationOn:!0,isTranslationActive:!1},this.showBottomSheet=!1,this.awardController=new n.A(this,{getThingId:()=>this.commentId}),this.pubsub=new e.u(this),this.onCommentUpdate=e=>{e.commentId===this.commentId&&(e.action===m.C.edit?this.openMenuBtn?.focus():e.action===m.C.distinguishAsMod&&(this.menuState={...this.menuState,isCommentDistinguishedAsAdmin:!1}))},this.closeMenu=()=>{this.shouldUseBottomSheet?(this.bottomSheet?.close(),this.showBottomSheet=!1):(this.dropdownMenu?.hide(),setTimeout((()=>{this.shadowRoot?.getElementById("overflow-trigger")?.focus({preventScroll:!0})})))},this.openMenu=()=>{this.shouldUseBottomSheet?(this.showBottomSheet=!0,this.updateComplete.then((()=>{this.bottomSheet?.showModal()}))):this.dropdownMenu?.show(),this.i18nTranslationOverrideEligible&&e.i(this,s.y({isCommentTranslated:this.menuState.isTranslationActive,isImmersiveTranslationsActive:!!this.translationContextValue?.isTranslationActive,comment:{id:this.commentId},isImmersiveVisit:this.isImmersiveVisit,isMtSeoVisit:this.isMtSeoVisit}))},this.handleKeyUp=e=>{"Enter"!==e.key&&"Space"!==e.key||this.closeMenu()},this.handlePostTranslationOverride=e=>{var a;(e.id===((a=this.postId)&&a.length>0&&!a.includes("t3_")?`t3_${a}`:a)||e.isContextUpdateEvent)&&G(this,{value:e.isTranslationActive})},this.handleCommentTranslationOverride=e=>{e.id===this.commentId&&"PDP_COMMENT_OVERFLOW_MENU"!==e.source&&G(this,{value:e.isTranslationActive})},this._activateFeature=async a=>e.r(a),this.handleDevvitSlotChange=e=>{e.target.assignedElements().forEach((e=>{"hr"!==e.tagName.toLowerCase()&&e.setAttribute("role","menuitem")}))}}connectedCallback(){super.connectedCallback(),this.menuState=this.getInitialMenuState(),this.menuProps=this.getMenuItemProps(),this.pubsub.subscribe(e.T.CommentUpdated,this.onCommentUpdate),this.pubsub.subscribe(e.T.I18nPostTranslationOverride,this.handlePostTranslationOverride,!0),this.pubsub.subscribe(e.T.I18nCommentTranslationOverride,this.handleCommentTranslationOverride,!1)}getAllMenuItemProps(){return [w(this),X(this),Q(this),(e=this,{label:"Translate",leadingIcon:E.t({attributes:{"aria-hidden":"true"},size:a.I.Medium}),attributes:{className:"translate-setting-menu-button"},toggleProps:{stateKey:"isTranslationActive",toggledLabel:"Show original",toggledIcon:R.t({attributes:{"aria-hidden":"true"},size:a.I.Medium})},onClick:()=>{G(e,{dispatchEvent:!0,dispatchTelemetry:!0})},isUserEligible:()=>!!e.i18nTranslationOverrideEligible,sortIndex:c.C.TranslationSetting}),x(this),F(this),_(this),K(this),M(this),$(this),J(this),C(this),ae(this)].sort(((e,a)=>e.sortIndex-a.sortIndex));var e}getMenuItemProps(){return this.getAllMenuItemProps().filter((e=>e.isUserEligible()))}updated(e){r.s({changedProperties:e,translationContextValue:this.translationContextValue,overrideEnabled:this.menuState.isTranslationActive})&&G(this,{value:this.translationContextValue.isTranslationActive})}getInitialMenuState(){return{isCommentSaved:this.isSaved,isCommentFollowed:this.isFollowed,isReplyNotificationOn:this.isSendReplies,isCommentCommercialCommunication:this.isCommercialCommunication,isCommentDistinguishedAsAdmin:this.distinguishedAs===e.bl.Admin,isTranslationActive:this.translationContextValue?.isTranslationActive||r.i()}}async onToggleMenuItemClick({updateFunction:a,stateKey:t,successText:i,errorText:n,toggleSuccessText:r,toggleErrorText:o}){if(!this.commentId)return;const s=this.menuState[t];try{const n=await a(this.commentId,s);this.menuState={...this.menuState,[t]:n};const o=e.c("faceplate-alert",{level:e.a5.success,message:n?i:r});this.dispatchEvent(o)}catch(a){const t=e.c("faceplate-alert",{level:e.a5.error,cause:"uncategorized",message:s?o:n});this.dispatchEvent(t)}}renderMenuItems(){return a.x` ${(e=this.menuProps, t=this.menuState, a.x` ${e.map((e=>y(e,t)))} `)} ${this.renderShareButton()} ${this.renderShareCommentAsPostButton()} <slot name="devvit-context-actions" @slotchange="${this.handleDevvitSlotChange}"></slot>`;var e,t}renderOverflowMenuButton(){return a.x` <faceplate-tracker source="${this.source}" action="${this.action}" noun="${this.noun}"> ${t.c({appearance:"plain-weak",attributes:{id:"overflow-trigger",onclick:this.shouldUseBottomSheet?this.openMenu:void 0,className:"open-menu-btn","aria-disabled":this.disabled?"true":"false","aria-label":"Open user actions"},leadingIcon:i.o({size:this.shouldUseSmallButton?a.I.Small:a.I.ExtraSmall}),size:e.q.Small})} </faceplate-tracker> `;}renderBottomSheetMenuModal(){return this.showBottomSheet?a.x` <faceplate-bottom-sheet data-ignore-click-interception> <faceplate-bottom-sheet-header slot="header" has-divider> ${this.menuLabel?this.menuLabel:"Options"} <span slot="trailing"> ${e.o({appearance:"secondary",attributes:{onclick:this.closeMenu,"aria-label":"Close actions menu"},leadingIcon:e.al({size:a.I.Small}),size:e.q.Small})} </span> </faceplate-bottom-sheet-header> <div class="w-full max-h-[19rem] overflow-y-auto pb-md"> <faceplate-menu @click="${this.closeMenu}" @keyup="${this.handleKeyUp}"> ${this.renderMenuItems()} </faceplate-menu> </div> </faceplate-bottom-sheet> `:"";}renderBottomSheetMenu(){return a.x` ${this.renderOverflowMenuButton()} ${this.renderBottomSheetMenuModal()} `}renderDropdownMenu(){return a.x` <rpl-dropdown class="block ${this.classOverride}" placement="bottom-end" ?disabled="${this.disabled}" data-ignore-click-interception> ${this.renderOverflowMenuButton()} <faceplate-menu slot="content" class="whitespace-nowrap max-h-[25.5rem] overflow-y-auto rounded-1" @click="${this.closeMenu}" @keyup="${this.handleKeyUp}"> ${this.renderMenuItems()} </faceplate-menu> </rpl-dropdown> `}renderShareButton(){if(!this.canRenderShareButton||!this.permalink)return"";const e={comment:{id:this.commentId,...(this.commentCreatedTimestamp && {created_timestamp:Date.parse(this.commentCreatedTimestamp)})}};return a.x` <div class="${W}"> <shreddit-comment-share-button data-faceplate-tracking-context="${JSON.stringify(e)}" is-list-item permalink="${this.permalink}" ?is-desktop-viewport="${!this.shouldUseBottomSheet}" ?disabled="${this.disabled}"></shreddit-comment-share-button> </div> `}renderShareCommentAsPostButton(){return this.canRenderShareCommentAsPostButton?a.x` ${y(te(this),this.menuState)} `:""}render(){const e=this.shouldUseBottomSheet?this.renderBottomSheetMenu():this.renderDropdownMenu();return this.i18nFeedbackCoachmarkEligible?a.x` <feedback-tooltip-overflow-menu @feedback-tooltip-closed="${this.openMenu}"> ${e} </feedback-tooltip-overflow-menu> `:this.canRenderInsightsButton&&!this.commentStatsKillSwitch?a.x` <comment-stats-coachmark class="nd:visible" coachmark-card-classes="${ee}"> ${e} </comment-stats-coachmark> `:a.x`${e}`}};return ie.styles=[e.t],e._([e.n({type:String})],ie.prototype,"source",void 0),e._([e.n({type:String})],ie.prototype,"action",void 0),e._([e.n({type:String})],ie.prototype,"noun",void 0),e._([e.n({type:String,attribute:"post-id"})],ie.prototype,"postId",void 0),e._([e.n({type:String,attribute:"comment-id"})],ie.prototype,"commentId",void 0),e._([e.n({type:Boolean,attribute:"should-use-bottom-sheet"})],ie.prototype,"shouldUseBottomSheet",void 0),e._([e.n({type:Boolean,attribute:"should-use-small-button"})],ie.prototype,"shouldUseSmallButton",void 0),e._([e.n({type:Boolean,attribute:"should-render-follow-menu-item"})],ie.prototype,"shouldRenderFollowMenuItem",void 0),e._([e.n({type:Boolean,attribute:"can-render-share-button"})],ie.prototype,"canRenderShareButton",void 0),e._([e.n({type:Boolean,attribute:"can-render-share-comment-as-post-button"})],ie.prototype,"canRenderShareCommentAsPostButton",void 0),e._([e.n({type:Boolean,attribute:"can-render-reply-button"})],ie.prototype,"canRenderReplyButton",void 0),e._([e.n({type:Boolean,attribute:"can-render-award-button"})],ie.prototype,"canRenderAwardButton",void 0),e._([e.n({type:Boolean,attribute:"can-render-insights-button"})],ie.prototype,"canRenderInsightsButton",void 0),e._([e.n({type:Boolean,attribute:"can-open-composer"})],ie.prototype,"canOpenComposer",void 0),e._([e.n({type:String,attribute:"class-override"})],ie.prototype,"classOverride",void 0),e._([e.n({type:Boolean,attribute:"disabled"})],ie.prototype,"disabled",void 0),e._([e.n({type:Boolean,attribute:"is-saved"})],ie.prototype,"isSaved",void 0),e._([e.n({type:Boolean,attribute:"is-followed"})],ie.prototype,"isFollowed",void 0),e._([e.n({type:Boolean,attribute:"deleted"})],ie.prototype,"isDeleted",void 0),e._([e.n({type:Boolean,attribute:"is-comment-author"})],ie.prototype,"isCommentAuthor",void 0),e._([e.n({type:Boolean,attribute:"is-user-logged-in"})],ie.prototype,"isUserLoggedIn",void 0),e._([e.n({type:Boolean,attribute:"is-admin"})],ie.prototype,"isAdmin",void 0),e._([e.n({type:String,attribute:"author-name"})],ie.prototype,"authorName",void 0),e._([e.n({type:String,attribute:"author-id"})],ie.prototype,"authorId",void 0),e._([e.n({type:Boolean,attribute:"editable-comment"})],ie.prototype,"isEditableComment",void 0),e._([e.n({type:String,attribute:"comment-error-on-edit-reason"})],ie.prototype,"commentErrorOnEditReason",void 0),e._([e.n({type:Boolean,attribute:"is-awardable"})],ie.prototype,"isAwardable",void 0),e._([e.n({type:Boolean,attribute:"is-send-replies"})],ie.prototype,"isSendReplies",void 0),e._([e.n({type:Boolean,attribute:"is-commercial-communication"})],ie.prototype,"isCommercialCommunication",void 0),e._([e.n({type:String,attribute:"distinguished-as"})],ie.prototype,"distinguishedAs",void 0),e._([e.n({type:String})],ie.prototype,"permalink",void 0),e._([e.n({type:String,attribute:"telemetry-source"})],ie.prototype,"telemetrySource",void 0),e._([e.n({type:String,attribute:"menu-label"})],ie.prototype,"menuLabel",void 0),e._([e.n({type:Boolean,attribute:"is-custom-post"})],ie.prototype,"isCustomPost",void 0),e._([e.aP({context:e.aR,subscribe:!0}),e.h()],ie.prototype,"translationContextValue",void 0),e._([e.h()],ie.prototype,"translationOverrideActive",void 0),e._([e.n({type:Boolean,attribute:"comment-pretranslated"})],ie.prototype,"isCommentPretranslated",void 0),e._([e.n({type:Boolean,attribute:"i18n-translation-override-eligible"})],ie.prototype,"i18nTranslationOverrideEligible",void 0),e._([e.n({type:Boolean,attribute:"i18n-language-and-translations-eligible"})],ie.prototype,"i18nLanguageAndTranslationsEligible",void 0),e._([e.n({type:Boolean,attribute:"i18n-feedback-coachmark-eligible"})],ie.prototype,"i18nFeedbackCoachmarkEligible",void 0),e._([e.n({type:Boolean,attribute:"i18n-feedback-eligible"})],ie.prototype,"i18nFeedbackEligible",void 0),e._([e.n({type:Boolean,attribute:"is-immersive-visit"})],ie.prototype,"isImmersiveVisit",void 0),e._([e.n({type:Boolean,attribute:"is-mt-seo-visit"})],ie.prototype,"isMtSeoVisit",void 0),e._([e.n({type:String,attribute:"subreddit-id"})],ie.prototype,"subredditId",void 0),e._([e.n({type:String,reflect:!0,attribute:"award-id"})],ie.prototype,"awardId",void 0),e._([e.n({type:String,attribute:"comment-created-timestamp"})],ie.prototype,"commentCreatedTimestamp",void 0),e._([e.n({type:Boolean,attribute:"comment-stats-kill-switch"})],ie.prototype,"commentStatsKillSwitch",void 0),e._([e.a2("faceplate-bottom-sheet")],ie.prototype,"bottomSheet",void 0),e._([e.a2("rpl-dropdown")],ie.prototype,"dropdownMenu",void 0),e._([e.a2(".open-menu-btn")],ie.prototype,"openMenuBtn",void 0),e._([e.h()],ie.prototype,"menuProps",void 0),e._([e.h()],ie.prototype,"menuState",void 0),e._([e.h()],ie.prototype,"showBottomSheet",void 0),ie=e._([e.e("shreddit-overflow-menu")],ie),{get ShredditOverflowMenu(){return ie}}}));
SML.di("./BlKmKeMB3d.js",import.meta.url,"BlKmKeMB3d");SML.di("./CwaCVQS_JL.js",import.meta.url,"CwaCVQS_JL");SML.di("./DENs6JDSt6.js",import.meta.url,"DENs6JDSt6");SML.di("./5r73EsgItq.js",import.meta.url,"5r73EsgItq");SML.di("./C3VtInt0zJ.js",import.meta.url,"C3VtInt0zJ");SML.di("./Ceyq2oJUzw.js",import.meta.url,"Ceyq2oJUzw");SML.di("./DaDL4fzqhc.js",import.meta.url,"DaDL4fzqhc");SML.di("./CbwFRcs2lM.js",import.meta.url,"CbwFRcs2lM");
SML.dm("DlV7CYOPlp",["BlKmKeMB3d","CwaCVQS_JL","DENs6JDSt6","5r73EsgItq","C3VtInt0zJ","Ceyq2oJUzw","DaDL4fzqhc","CbwFRcs2lM"],(async(e,t,r,o,s)=>{let i=class extends o.s{constructor(){super(...arguments),this.country="",this.cookieDomain="",this.pubsub=new e.u(this),this.hasThemeCookieBeenSetByUser=!1}async connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(e.T.ThemeCookieSetByUser,(()=>{this.hasThemeCookieBeenSetByUser=!0})),this.syncCookieToUserPreference()}async syncCookieToUserPreference(){try{const{data:o}=await e.Y({operation:e.O.IdentityUserPreferences,variables:{includeNightMode:!0}});if(this.hasThemeCookieBeenSetByUser)return;const i=o.identity?.preferences?.isNightModeEnabled;if(null==i)return;const n=s.b(),m=n===r.D.Darkmode;if(null!=n&&i===m)return;t.u({displayTheme:i?r.D.Darkmode:r.D.Lightmode}),s.s(this.country,this.cookieDomain,i),this.reportMismatch(),this.pubsub.publish(e.T.ThemeCookieSyncedFromUserPreference)}catch{}}reportMismatch(){const t=e.aq(this.country)&&!e.ar(),r={cookies_enabled:navigator.cookieEnabled&&!t?"true":"false"};this.w3Report(r)}w3Report(t){e.as({type:e.at.Counter,name:"shreddit_darkmode_preference_mismatches",value:1,labels:t})}render(){return o.x`<community-colors></community-colors>`}};return e._([e.n({type:String})],i.prototype,"country",void 0),e._([e.n({type:String,attribute:"cookie-domain"})],i.prototype,"cookieDomain",void 0),i=e._([e.e("shreddit-darkmode-syncer")],i),{get ShredditDarkmodeSyncer(){return i}}}));
SML.di("./BlKmKeMB3d.js",import.meta.url,"BlKmKeMB3d");SML.di("./C796e9-g_q.js",import.meta.url,"C796e9-g_q");SML.di("./5r73EsgItq.js",import.meta.url,"5r73EsgItq");SML.di("./CZapDH1dI7.js",import.meta.url,"CZapDH1dI7");SML.di("./D7r2ODPvE2.js",import.meta.url,"D7r2ODPvE2");SML.di("./BtFuaDTjiU.js",import.meta.url,"BtFuaDTjiU");
SML.dm("Gzc3r_PodC",["BlKmKeMB3d","C796e9-g_q","5r73EsgItq","CZapDH1dI7","D7r2ODPvE2","BtFuaDTjiU"],(async(t,e,r)=>{let i=class extends r.s{constructor(){super(...arguments),this.subredditName="",this.userName="",this.thingId="",this.subredditId="",this.userId="",this.forceOpen=!1,this.postId="",this.conversationId="",this.isUserDeleted=!1,this.triggerSource=e.a.USERNAME,this.openModNotes=async e=>{const{subredditName:r,userName:i,thingId:s,subredditId:o,userId:d,triggerSource:n,postId:p}=this,u=e??n;t.p(t.T.ModNotesRailOpen,{subredditName:r,userName:this.isUserDeleted?"deleted":i,thingId:s,subredditId:o,userId:this.isUserDeleted?"deleted":d,triggerSource:u,postId:p,conversationId:this.conversationId})},this.handleAnchorClick=t=>{t instanceof MouseEvent&&0!==t.button||t.ctrlKey||t.metaKey||(t.preventDefault(),this.openModNotes())},this.preventAnchorClick=t=>{const e=t.target;if(e instanceof HTMLSlotElement){e.assignedElements().forEach((t=>{(t instanceof HTMLAnchorElement||this.forceOpen||this.isUserDeleted)&&(t.onclick=this.handleAnchorClick,t.ontouchstart=this.handleAnchorClick)}))}}}render(){return this.isUserDeleted||this.subredditName&&this.subredditId&&this.userName&&this.userId?r.x` <slot @slotchange="${this.preventAnchorClick}"></slot> `:r.x`<slot></slot>`}};return t._([t.n({type:String,attribute:"subreddit-name"})],i.prototype,"subredditName",void 0),t._([t.n({type:String,attribute:"user-name"})],i.prototype,"userName",void 0),t._([t.n({type:String,attribute:"thing-id"})],i.prototype,"thingId",void 0),t._([t.n({type:String,attribute:"subreddit-id"})],i.prototype,"subredditId",void 0),t._([t.n({type:String,attribute:"user-id"})],i.prototype,"userId",void 0),t._([t.n({type:Boolean,attribute:"force-open"})],i.prototype,"forceOpen",void 0),t._([t.n({type:String,attribute:"post-id"})],i.prototype,"postId",void 0),t._([t.n({type:String,attribute:"conversation-id"})],i.prototype,"conversationId",void 0),t._([t.n({type:Boolean,attribute:"is-user-deleted"})],i.prototype,"isUserDeleted",void 0),t._([t.n({type:String,attribute:"trigger-source"})],i.prototype,"triggerSource",void 0),i=t._([t.e("mod-notes-opener")],i),{get ModNotesOpener(){return i}}}));
SML.di("./BlKmKeMB3d.js",import.meta.url,"BlKmKeMB3d");SML.di("./BPHbvkjHNE.js",import.meta.url,"BPHbvkjHNE");SML.di("./fgYl4BR7hc.js",import.meta.url,"fgYl4BR7hc");SML.di("./5r73EsgItq.js",import.meta.url,"5r73EsgItq");SML.di("./DaDL4fzqhc.js",import.meta.url,"DaDL4fzqhc");
SML.dm("Il75lCqg2p",["BlKmKeMB3d","BPHbvkjHNE","fgYl4BR7hc","5r73EsgItq","DaDL4fzqhc"],(async(t,e,s)=>({PostPartialUpdateController:class{constructor(e,s){this.host=e,this.args=s,this._isEligibleForPartialUpdate=!1,this.handleUpdatePost=async()=>{this.isPDP&&t.p(t.T.PostUpdated,{postId:this.postId,action:this.args.updatePostBodyPendingAction,value:!0}),await this.getAndReplacePartial(),t.p(t.T.PostUpdated,{postId:this.postId,action:this.args.updatePostBodyPendingAction,value:!1})},this._partialRequest=new t.aS(e),e.addController(this)}get postId(){return this.args.getPostId()}get isPDP(){return e.i(this.viewContext)}get isFeed(){return e.c(this.viewContext)}get subredditPrefixedName(){return this.args.getSubredditPrefixedName()}get viewContext(){return this.args.getViewContext()}get viewType(){return this.args.getViewType()}hostConnected(){this._isEligibleForPartialUpdate=this.isEligibleForPartialUpdate(),this._isEligibleForPartialUpdate&&this.host.addEventListener(e.d,this.handleUpdatePost)}hostDisconnected(){this._isEligibleForPartialUpdate&&this.host.removeEventListener(e.d,this.handleUpdatePost)}isEligibleForPartialUpdate(){return this.isPDP||this.isFeed}async getAndReplacePartial(){const e=this.isPDP?this.getPDPPostUrl():this.getFeedPostUrl();if(!e)return;const s=await this._partialRequest.request(e),i=await(s?.text());if(!i)return;const r=(new DOMParser).parseFromString(i,"text/html"),a=r.querySelector("shreddit-post-text-body"),o=r.querySelector("[data-ama-status-bar]");a&&t.aT(a.innerHTML,this.host,t.P.Contents);const d=document.querySelector(`shreddit-post[id="${this.postId}"]`),n=d?.querySelector("[data-ama-status-bar]");n&&o&&t.aT(o.outerHTML,n,t.P.Replace),this.host.requestUpdate()}getPDPPostUrl(){const t=this.subredditPrefixedName?.substring(2);if(!t)return;const e=this.subredditPrefixedName?.startsWith("u_");return`/svc/shreddit/partial-post/${t}/${this.postId}?${new URLSearchParams({postViewContext:this.viewContext,shreddit_pdp_safety_moderation:"enabled",...e&&{isProfilePost:"true"}}).toString()}`}getFeedPostUrl(){return`/svc/shreddit/partial-feed-post/${this.postId}?${new URLSearchParams({[s.P.PostViewContext]:this.viewContext,[s.P.FeedViewType]:this.viewType}).toString()}`}}})));
SML.di("./BlKmKeMB3d.js",import.meta.url,"BlKmKeMB3d");SML.di("./5r73EsgItq.js",import.meta.url,"5r73EsgItq");
SML.dm("Jv78h4dIGp",["BlKmKeMB3d","5r73EsgItq"],(async(e,t)=>{const s=t.s;let c=class extends s{static get styles(){return[e.t]}createRenderRoot(){return this}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onReadMoreClick)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onReadMoreClick)}onReadMoreClick(e){e.preventDefault(),this.querySelector(":scope > faceplate-tracker")?.classList?.add("hidden"),this.querySelector(":scope > span.hidden")?.classList.remove("hidden"),this.removeEventListener("click",this.onReadMoreClick)}};return c=e._([e.e("shreddit-mod-comment")],c),{get ShredditModComment(){return c}}}));
SML.di("./BlKmKeMB3d.js",import.meta.url,"BlKmKeMB3d");SML.di("./5r73EsgItq.js",import.meta.url,"5r73EsgItq");SML.di("./BDZRQCYT6e.js",import.meta.url,"BDZRQCYT6e");
SML.dm("pvnEWPttwH",["BlKmKeMB3d","5r73EsgItq","BDZRQCYT6e"],(async(e,t,a)=>{const i=t.s;let r=class extends i{constructor(){super(...arguments),this.noteId="",this.noteContent="",this.userId="",this.subredditId="",this.recordedFeedback=null,this.provideFeedback=t=>()=>{e.i(this,e.b({source:"moderator",action:"click",noun:t},{modnote:{id:this.noteId,content:this.noteContent},subreddit:{id:this.subredditId},target_user:{id:this.userId}}));try{e.a8.isAvailable()&&e.a8.setItem(`${e.a9.ModUserSummaryFeedback}-${this.noteId}`,t)}catch(e){window.Sentry?.captureError?.(e)}const a=this.shadowRoot?.querySelector("span");a&&(a.innerText="Thanks for your feedback"),(this.shadowRoot?.querySelectorAll("button")??[]).forEach((e=>e.classList.add("hidden")))}}connectedCallback(){super.connectedCallback();try{e.a8.isAvailable()&&(this.recordedFeedback=e.a8.getItem(`${e.a9.ModUserSummaryFeedback}-${this.noteId}`))}catch(e){window.Sentry?.captureError?.(e)}}render(){return t.x`<div class="${this.recordedFeedback?"hidden":"flex"} items-center gap-2xs"> <span class="flex-1 text-14">${"Is this summary helpful?"}</span> ${e.o({appearance:"bordered",attributes:{slot:"trigger",onclick:this.provideFeedback("summary_is_helpful")},size:e.q.Small,leadingIcon:a.c({size:t.I.Small})})} ${e.o({appearance:"bordered",attributes:{slot:"trigger",onclick:this.provideFeedback("summary_is_not_helpful")},size:e.q.Small,leadingIcon:e.al({size:t.I.Small})})} </div>`;}};return r.styles=[e.t],e._([e.n({type:String,attribute:"note-id"})],r.prototype,"noteId",void 0),e._([e.n({type:String,attribute:"note-content"})],r.prototype,"noteContent",void 0),e._([e.n({type:String,attribute:"user-id"})],r.prototype,"userId",void 0),e._([e.n({type:String,attribute:"subreddit-id"})],r.prototype,"subredditId",void 0),e._([e.h()],r.prototype,"recordedFeedback",void 0),r=e._([e.e("mod-user-summary-feedback")],r),{get ModUserSummaryFeedback(){return r}}}));
SML.di("./BlKmKeMB3d.js",import.meta.url,"BlKmKeMB3d");SML.di("./Hw1PFKH8z9.js",import.meta.url,"Hw1PFKH8z9");SML.di("./5r73EsgItq.js",import.meta.url,"5r73EsgItq");
SML.dm("xO1wQEi9M2",["BlKmKeMB3d","Hw1PFKH8z9","5r73EsgItq"],(async(t,e,i)=>{let o=class extends i.s{constructor(){super(...arguments),this.url="",this.toastMessage="",this.isDesktopViewport=!1,this._copyUrl=async()=>{if(!this.url)return;const i={url:this.url};if(e.S.Clipboard===(await e.s(i,this.isDesktopViewport))){const e=t.c("faceplate-alert",{level:t.a5.success,message:this.toastMessage||"Link copied"});this.dispatchEvent(e)}}}handleClick(){this._copyUrl()}handleKeydown(t){"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),this.handleClick())}render(){return i.x`<slot @click="${this.handleClick}" @keydown="${this.handleKeydown}"></slot>`}};return t._([t.n({type:String,attribute:"url"})],o.prototype,"url",void 0),t._([t.n({type:String,attribute:"toast-message"})],o.prototype,"toastMessage",void 0),t._([t.n({type:Boolean,attribute:"is-desktop-viewport"})],o.prototype,"isDesktopViewport",void 0),o=t._([t.e("copy-url")],o),{get CopyUrl(){return o}}}));
SML.di("./BlKmKeMB3d.js",import.meta.url,"BlKmKeMB3d");SML.di("./5r73EsgItq.js",import.meta.url,"5r73EsgItq");
SML.dm("xZtIUXNjZK",["BlKmKeMB3d","5r73EsgItq"],(async(r,e)=>{var a=e.a`${r.a7}:host{display:flex;overflow:hidden;background-color:var(--color-secondary-background);width:100%}:host(:dir(rtl)){transform:scaleX(-1)}:host([size=small]){height:var(--size-2xs);border-radius:2px}:host([size=medium]){height:var(--size-xs);border-radius:var(--radius-sm)}:host::after{content:'';display:block;width:100%;border-start-end-radius:0;border-end-end-radius:0;transform:translateX(calc(1% * (var(--progress-value) - 100)));transition:transform 350ms ease}:host([appearance=brand])::after{background-color:var(--color-brand-background)}:host([appearance=primary])::after{background-color:var(--color-primary-background)}`;const t={Primary:"primary",Brand:"brand"},s={Small:"small",Medium:"medium"};class o extends r.R{constructor(){super(...arguments),this.appearance=t.Primary,this.size=s.Medium,this.value=0}connectedCallback(){super.connectedCallback(),this.setAttribute("role","progressbar"),this.setAttribute("tabindex","0")}render(){const r=Math.min(Math.max(this.value,0),100).toString();return this.style.setProperty("--progress-value",r),this.setAttribute("aria-valuenow",r),e.A}}r._([r.n({type:String})],o.prototype,"appearance",void 0),r._([r.n({type:String})],o.prototype,"size",void 0),r._([r.n({type:Number})],o.prototype,"value",void 0);let i=class extends o{};return i.styles=a,i=r._([r.e("rpl-progress-indicator")],i),{get RPLProgressIndicator(){return i},RPLProgressIndicatorAppearance:t,RPLProgressIndicatorSize:s}}));